% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrreprt}

\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else  
    % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{5}
% Make \paragraph and \subparagraph free-standing
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi


\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newlength{\cslentryspacingunit} % times entry-spacing
\setlength{\cslentryspacingunit}{\parskip}
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1
  \let\oldpar\par
  \def\par{\hangindent=\cslhangindent\oldpar}
  \fi
  % set entry spacing
  \setlength{\parskip}{#2\cslentryspacingunit}
 }%
 {}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

\usepackage{algorithm2e}
\KOMAoption{captions}{tableheading}
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{bookmark}{}{\usepackage{bookmark}}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[skins,breakable]{tcolorbox}}
\makeatother
\makeatletter
\@ifundefined{shadecolor}{\definecolor{shadecolor}{rgb}{.97, .97, .97}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\makeatother
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Sorting between Workers and Firms (and Locations)},
  pdfauthor={Mitchell Valdes-Bobes},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}

\title{Sorting between Workers and Firms (and Locations)}
\author{Mitchell Valdes-Bobes}
\date{October 2, 2023}

\begin{document}
\maketitle
\begin{abstract}
Lorem ipsum dolor sit amet.
\end{abstract}
\ifdefined\Shaded\renewenvironment{Shaded}{\begin{tcolorbox}[borderline west={3pt}{0pt}{shadecolor}, interior hidden, boxrule=0pt, breakable, sharp corners, enhanced, frame hidden]}{\end{tcolorbox}}\fi

\renewcommand*\contentsname{Table of contents}
{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{2}
\tableofcontents
}
\bookmarksetup{startatroot}

\hypertarget{introduction}{%
\chapter{Introduction}\label{introduction}}

\emph{Notes}:

\begin{itemize}
\tightlist
\item
  I adopt the framework from
  (\protect\hyperlink{ref-liseMacrodynamicsSortingWorkers2017}{Lise and
  Robin 2017}).
\item
  Introducing a fixed amount of locations and population distribution of
  workers should be an equilibrium outcome.
\item
  Workers can ``partially'' direct their search to each location.

  \begin{itemize}
  \tightlist
  \item
    In practice workers randomize over locations paying a cost.
  \item
    Cost of random search is zero.
  \item
    Cost increases unboundedly as the worker directs their search to a
    particular location.
  \end{itemize}
\item
  Productivity depends on the quality of match and aggregate state as in
  the original paper. I want to introduce a third component which is
  location productivity.

  \begin{itemize}
  \tightlist
  \item
    I intend to use idea exchange as the driver of location
    productivity.
  \item
    I plan to draw on a framework similar to
    (\protect\hyperlink{ref-davisSpatialKnowledgeEconomy2019}{Davis and
    Dingel 2019}) to model the value added to production by idea
    exchange.
  \end{itemize}
\end{itemize}

\bookmarksetup{startatroot}

\hypertarget{model}{%
\chapter{Model}\label{model}}

\hypertarget{model-setup}{%
\section{Model Setup}\label{model-setup}}

\hypertarget{demographics}{%
\subsection{Demographics}\label{demographics}}

\begin{itemize}
\tightlist
\item
  There exists a discrete and finite set of locations denoted as
  \(\mathcal{J} = \{1, \ldots, |\mathcal{J}|\}\), with each location
  indexed by \(j \in \mathcal{J}\).
\item
  A continuum of workers is characterized by their abilities, which are
  denoted as \(x \in \mathcal{X}\).

  \begin{itemize}
  \tightlist
  \item
    The total measure of workers is normalized to 1.
  \item
    Workers follow an exogenous distribution \(\ell(x)\).
  \item
    Within each location, there is an endogenous distribution of workers
    denoted as \(\ell^{j}(x)\).
  \item
    I represent the total population in location \(j\) as \(\mu_j\).
  \end{itemize}
\item
  A continuum of firms is characterized by their technology, which is
  denoted as \(y \in \mathcal{Y}\).

  \begin{itemize}
  \tightlist
  \item
    The total measure of firms is normalized to 1.
  \item
    Firms follow an exogenous distribution \(\gamma(y)\).
  \end{itemize}
\end{itemize}

\hypertarget{technology}{%
\subsection{Technology}\label{technology}}

\begin{itemize}
\tightlist
\item
  There is an exogenous cost associated with posting \(v\) job
  opportunities in location \(j\), denoted as \(c_{j}(v)\), where
  \(c_{j}(v) \geq 0\).

  \begin{itemize}
  \tightlist
  \item
    I assume this cost function is increasing, convex, and potentially
    dependent on the location.
  \end{itemize}
\item
  Both workers and firms discount the future at the rate \(\beta\).
\item
  Workers have the ability to move across locations:

  \begin{itemize}
  \tightlist
  \item
    Workers select a mixed strategy for their job search, denoted as
    \(\phi^j_i(x)\), where
    \(\phi^j_i(x) = \{\phi^j_i(x, j')\}_{j' \in \mathcal{J}}\)
    represents the probability that a worker of type \(x\) from location
    \(j\) searches in location \(j'\), and \(i \in \{u,s\}\) refers to
    the employment status of the worker.
  \item
    Each search strategy incurs an associated cost denoted as
    \(c_s(\phi_i^j(x))\).
  \item
    When a worker moves from one location to another (from \(j\) to
    \(j'\)), they must pay a relocation cost denoted as
    \(F^{j \to j'} \geq 0\), with \(F^{j \to j} = 0\) for movements
    within the same location.
  \end{itemize}
\item
  Unemployed workers receive instant utility in each location denoted as
  \(b(x,j)\).\footnote{In
    (\protect\hyperlink{ref-liseMacrodynamicsSortingWorkers2017}{Lise
    and Robin 2017}), \(b(x)\) represents unemployment benefits.
    However, I adopt a more general approach to account for differences
    in the cost of living across locations.}
\item
  Firms have access to a production technology that operates at the
  match level and depends on the location and the aggregate state of the
  economy, represented as \(f(x, y, j)\).

  \begin{itemize}
  \tightlist
  \item
    Worker productivity is influenced by the distribution of skills
    within each location (see Chapter
    -Section~\ref{sec-agglomeration_effect} for more details).
  \end{itemize}
\end{itemize}

Certainly, I'll review and refine this section for you:

\hypertarget{job-search}{%
\subsection{Job Search}\label{job-search}}

Both unemployed and employed workers engage in job search activities.
Let's denote \(s\) as the search intensity of an employed worker,
\(s < 1\) is normalized such that an unemployed worker has a search
intensity of \(1\). To compute the total search intensity in location
\(j\), we need to consider the following expression:

\[
L^j = \sum_{j'\in\mathcal{J}}\left[\int \phi_u^{j'}(x,j)u^{j'}(x) dx + s\int\int \phi_s^{j'}(x,j)h^{j'}(x,y)dx dy\right]
\]

Total search intensity (\(L^j\)) in location \(j\) accounts for the
search behaviors of both employed and unemployed workers from all other
locations (\(j'\)) in the model. It takes into account the probabilities
of workers from everywhere else searching for jobs in location \(j\),
capturing the spatial dynamics of the labor market.

Now, let's introduce some additional definitions:

\begin{itemize}
\item
  Let \(v^j(y)\) represent the number of job opportunities posted by a
  firm \(y\) in location \(j\).
\item
  \(V^j = \int v^j(y) dy\) represents the total number of job
  opportunities posted location \(j\).
\end{itemize}

Now, let's define \(M^j = M(L^j, V^j)\) as the number of job matches in
location \(j\). With these definitions in place, we can calculate the
following probabilities:

\begin{itemize}
\item
  The probability that an unemployed worker contacts a vacancy in
  location \(j\) is given by: \[p^j = \frac{M^j}{L^j}\] Here, \(sp^j\)
  represents the probability that an employed worker contacts a vacancy.
\item
  The probability that a firm contacts any searching worker is defined
  as: \[q^j = \frac{M^j}{V^j}\]
\end{itemize}

Additionally, let \(\theta^j = V^j / L^j\), represent the market
tightness in location \(j'\).

\hypertarget{dynamic-programming-problem}{%
\section{Dynamic Programming
Problem}\label{dynamic-programming-problem}}

Consider the following notation:

\begin{itemize}
\tightlist
\item
  \(U^{j}(x)\) represents the value for an unemployed worker of type
  \(x\) in location \(j'\).
\item
  The value of receiving a job offer depends on the employment status of
  the worker:

  \begin{itemize}
  \tightlist
  \item
    \(W^{j\to j'}_{0}(x,y)\) denotes the value of a type-\(x\)
    unemployed worker in location \(j\) who is hired by a firm of type
    \(y\) in location \(j'\).
  \item
    \(W^{j\to j'}_{1}(x,y \to y')\) represents the value offered by a
    type \(y'\) firm in location \(j'\) to a type \(x\) worker currently
    employed at a type \(y\) firm in location \(j\).
  \end{itemize}
\item
  \(J^j(x,y)\) denotes the value of a match between a type \(x\) worker
  and a type \(y\) firm inlocation \(j\).
\end{itemize}

Now, let's define the joint surplus of a match between a type \(x\)
unemployed worker in location \(j\) and a type \(y\) firm in location
\(j'\) as:

\[S^{j\to j'}(x,y) = J^{j'}(x,y) - [U^{j}(x) + F^{j\to j'}]\]

\(S^{j\to j'}(x,y)\) represent much better off (or worse off) the worker
and the firm are when they are matched compared to when the worker is
unemployed in location \(j\) and considering the cost of moving from
\(j\) to \(j'\). If \(S^{j\to j'}(x,y)\) is positive, it indicates a
positive gain from the match; if it's negative, it represents a net
loss.

\hypertarget{search-strategy}{%
\subsection{Search Strategy}\label{search-strategy}}

In this section I describe the search strategy of workers. I specify
what do I mean by a search strategy and how do workers choose their
search strategy. I also describe the cost of search and how it is
related to the search strategy. Finally I derive the optimal search
strategy for each worker type and location. Throughout this section I
abstract from the employment status of the worker.

I assume that workers are \emph{rational inattentive} in the style of
(\protect\hyperlink{ref-simsImplicationsRationalInattention2003}{Christopher
A. Sims 2003}),
(\protect\hyperlink{ref-simsRationalInattentionLinearQuadratic2006}{Christopher
A. Sims 2006}) and
(\protect\hyperlink{ref-matejkaRationalInattentionDiscrete2015}{Matějka
and McKay 2015}). Workers have prior knoledge of the value of moving to
every location \(j'\) \(\{u^{j\to j'}(x)\}_{j \in \mathcal{J}}\), note
that this is dependent on the type of each worker and their location at
the moment of decition making. Assume that this prior knolege is
described by a joint distribution
\(G\left(\{u^{j\to j'}(x)\}_{j \in \mathcal{J}} \right)\).

To reﬁne this knowledge, workers can aquire information about the value
of each location by searching. Workers are in escence acquiring
informatin to reduce uncertainty (i.e.~reduce entropy) associated with
their prior knoledge. I make the siplyfing assumption that
\(\phi^j_0(x)\), the unconditional distribution of of choosing each
locaiton is uniform, this is:

\[\phi^j_0(x, j') = \frac{1}{\mid \mathcal{J} \mid} \qquad 
\forall j' \in \mathcal{J}, x \in \mathcal{X}\]

Thus type \(x\) workers in location \(j\) are faced with the problem:

\begin{align*}
\max_{\phi_i^j(x)} \left( \sum_{j' \in \mathcal{J}} \phi_i^j(x, j') u^{j\to j'}(x) - c(\phi_i^j(x), \phi^j_0(x))  \right)\\
\text{s.t.} \quad \sum_{j'\in \mathcal{J}}\phi^j_i(x, j') = 1 \\
\quad \text{and} \quad \phi^j_i(x, j') \geq 0 \quad \forall j' \in \mathcal{J}
\end{align*}

With \(c(\phi_i^j(x), \phi^j_0(x))\) being the cost of reducing the
entropy of the prior (in this case the assumption is the prior is no
information). The cost is proportional to the Kullback--Leibler
divergence (also called relative entropy and \(I\)-divergence) between
the selected distribution and the prior (uniform). More information on
the Kullback--Leibler divergence
\href{https://en.wikipedia.org/wiki/Kullback\%E2\%80\%93Leibler_divergence}{here}.
For simplicity, denote \$c(\phi\_i\^{}j(x), \phi\^{}j\_0(x)) =
\(c(\phi_i^j(x))\)\$

\begin{equation}
\label{eq-cost-search}
c_s(\phi^j_i(x)) = c \sum_{j'\in \mathcal{J}}\phi^j_i(x, j')\log{(J\phi^i_j(x, j'))}
\end{equation}

If processing information where costless i.e.~\(c = 0\) the worker would
be able to perfectly direct their search towards the highest value
location. With costly information procesing (\(c > 0\)), the worker can
still select to search randomly (i.e.~uniform distribution) and pay the
asociated cost of \(0\), when the worker starts directing their search
towards a particular location (the asusmption is that this requieres,
aquiring more information of one of the potential values relative to the
others) then the cost grows unboundedly large as the strategy gets
closer to perfectly directing search to a particular location.

\begin{itemize}
\tightlist
\item
  Besides
  (\protect\hyperlink{ref-matejkaRationalInattentionDiscrete2015}{Matějka
  and McKay 2015}) which formulates the problem in general terms, some
  works in the literature that use this cost structure are
  (\protect\hyperlink{ref-wuPartiallyDirectedSearch2020}{Wu 2020}) and
  (\protect\hyperlink{ref-cheremukhinTargetedSearchMatching2020}{Cheremukhin,
  Restrepo-Echavarria, and Tutino 2020}).
\end{itemize}

Solving the maximization problem we get the optimal strategy for each
worker as:

\begin{align*}
\max_{\phi_i^j(x)} \left( \sum_{j' \in \mathcal{J}} \phi_i^j(x, j') u^{j\to j'}(x) - c \sum_{j'\in \mathcal{J}}\phi^j_i(x, j')\log{(J\phi^i_j(x, j'))} \right) \\
\text{s.t.} \quad \sum_{j'\in \mathcal{J}}\phi^j_i(x, j') = 1 \\
\quad \text{and} \quad \phi^j_i(x, j') \geq 0 \quad \forall j' \in \mathcal{J}
\end{align*}

I'll ignore the non-negativity constraints and write the Lagrangean of
the problem:
\[\mathcal{L}(\phi^j(x), \lambda) =  \sum_{j'\in\mathcal{J}} \phi^j(x, j') u^{j\to j'}(x) - c \sum_{j'\in \mathcal{J}}\phi^j(x, j')\log{(J\phi^j(x, j'))} + \lambda \left(\sum_{j'\in \mathcal{J}}\phi^j(x, j') - 1\right)\]

First order conditions of the problem give us:

\begin{align*}
  [\phi^j(x, j')] &:\quad u^{j\to j'}(x) - c - c \log[J \phi^j(x, j')] = \lambda \\
  [\lambda] &: \quad \sum_{j'\in \mathcal{J}}\phi^j(x, j') = 1
\end{align*}

Take any two \(j_1\), \(j_2\) we have that
\[u^{j\to j_1}(x)  - c \log[J \phi^j(x, j_1)] =u^{j\to j_2}(x)  - c \log[J \phi^j(x, j_2)]\]

thus

\begin{align*}
  \frac{u^{j\to j_1}(x) - u^{j\to j_2}(x) }{c} &= \log\left(\frac{ \phi^j(x, j_1)}{ \phi^j(x, j_2)}\right) \\ 
  &\implies \quad \frac{ \phi^j(x, j_1)}{ \phi^j(x, j_2)} = \frac{
    e^{
       u^{j\to j_1}(x) / c 
        }
        }{e^{
u^{j\to j_2}(x) / c
        }
        }
\end{align*}

Fix any \(\hat{j}\), then we can write any other \(j'\in\mathcal{J}\) in
therms of \(\hat{j}\) and plug into the constraint to get:

\begin{align*}
  \sum_{j'\in \mathcal{J}}\phi^j(x, j') &= \sum_{j'\in \mathcal{J}}\frac{e^{u^{j\to j'}(x) }}{e^{u^{j\to \hat{j}}(x) }} \phi^j(x, \hat{j})\\  &= \frac{\phi^j(x, \hat{j})}{e^{u^{j\to \hat{j}}(x) / c}} \sum_{j\in \mathcal{J}}e^{u^{j\to j'}(x) / c} = 1
\end{align*}

Which we can solve to obtain

\begin{equation}
\label{eq:optimal-search-strategy}
    \phi^j(x,\hat{j}) = \frac{e^{u^{j\to \hat{j}}(x) / c}}{\sum_{ j' \in \mathcal{J}}e^{u^{j\to j'}(x) / c}}
\end{equation}

The non-negativity constraints are satisfied because the exponential
function is always positive.

\textbf{Note:} I could have follow
(\protect\hyperlink{ref-matejkaRationalInattentionDiscrete2015}{Matějka
and McKay 2015}) and have more complex prior beliefs, the result of this
would be that the optimal strategy would be biased by the prior
attractivenes of each location. In terms of closed form solution I would
get something like:
\[\phi^j(x,\hat{j}) = \frac{e^{(u^{j\to \hat{j}}(x) + \zeta^{j \to \hat{j}}(x) )/ c}}{\sum_{ j' \in \mathcal{J}}e^{(u^{j\to j'}(x) + \zeta^{j \to \hat{j}}(x)) / c}}\]

where \(\zeta^{j \to j'}(x) = c \log(\phi^j_0(x))\) is the prior
attractiveness of moving from location \(j\) to location \(\hat{j}\).
Note that this have the implication: - When an option seems very
attractive a priori, then it has a relatively high probability of being
selected even if its true value is low. (verbatim quote from
(\protect\hyperlink{ref-matejkaRationalInattentionDiscrete2015}{Matějka
and McKay 2015})).

I choose to have a uniform prior to simplify the exposition and because
I think it is a reasonable assumption. But I also can see how relaxing
this assumption could have interesting implications for the model.

We already stablished that with costless information the limit behavior
is that the worker perfectly directs their search to the highest value
location. Next, note that
\(\lim_{c \to \infty} \exp(u^{j\to \hat{j}}(x) / c) = 1\) thus the limit
behavior as the cost of information rises is dissregard new information
decide based on the prior

\begin{itemize}
\tightlist
\item
  With uniform prior:
  \(\lim_{c \to \infty} \phi^j(x,\hat{j}) = \frac{1}{\mid \mathcal{J} \mid}\)
  which is random search.
\item
  With some other prior:
  \(\lim_{c \to \infty} \phi^j(x,\hat{j}) = \phi^j_0(x)\).
\end{itemize}

Here the scaling parameter \(c\) plays a similar role to the noise
parameter in the discrete choice model from
(\protect\hyperlink{ref-lentzCompetitiveRandomSearch}{Lentz and Moen,
n.d.}).

\hypertarget{unemployed-worker}{%
\subsection{Unemployed Worker}\label{unemployed-worker}}

Unemployed workers receive instant utility from living in location
\(j\), \(b(x,j)\), and anticipate the probability of getting an offer
\(p^j\) in each location. They will choose the strategy that maximizes
their future expected value knowing that in each location they will
receive an offer which can be from any firm with a likelihood
proportional to the share of total vacancies posted by each firm in each
market. The worker will accept only the offers that promise her a higher
value than unemployment:

\begin{align*}
U^{j}(x) = \underbrace{b(x,j)}_{\text{instant utility}} + &\beta\max_{\phi^j_u(x)}\left\{ \underbrace{-c(\phi^j_u(x))}_{\text{cost of search strategy}} \right.  + \\
& \sum_{j'\in \mathcal{J}} \underbrace{\phi^j_u(x, j')}_{\text{weight by probability of search in} j'}\left[ \overbrace{(1-p^{j'})U^{j'}(x)}^{\text{no offer, stays unemployed now in} j'} \right.  \\
& \left. \left. \hspace{0cm} + p^{j'} \underbrace{\int \max\left\{U^{j'}(x),W^{j\to j'}_{0}(x,y)\right\}\frac{v^{j'}(y)}{V^{j'}}dy}_{\text{if offer, pays cost,moves to } j \text{ and then is matched randomly with some firm}} \right] \right\} 
\end{align*}

I use the same bargaining as in
(\protect\hyperlink{ref-cahucWageBargainingOntheJob2006}{Cahuc,
Postel-Vinay, and Robin 2006}) and
(\protect\hyperlink{ref-baggerEmpiricalModelWage2019a}{Bagger and Lentz
2019}). The Nash bargaining solution implies that the worker recieves a
constant share \(\xi\) of the match rent, where \(\xi\) is the
bargaining power of the worker:

\[W^{j \to j'}_{0}(x,y) = U^{j}(x) + \xi S^{j\to j'}(x,y) =  (1 - \xi) U^{j}(x) + \xi [J^{j'}(x,y) - F^{j \to j'}]\]

From \eqref{eq:optimal-search-strategy} we know that the optimal
strategy for each unemployed worker is:

\begin{equation}\label{eq-optimal-search-unemployed}
\phi_{u}^{j}(x,j')=\frac{\exp{\left(\left[p^{j'} \xi \int \max\left\{0, S^{j\to j'}(x,y) \right\}\frac{v^{j'}(y)}{V^{j'}}dy \right] / c\right)}}{\sum_{\tilde{j}\in \mathcal{J}}\exp{\left(\left[p^{\tilde{j}} \xi \int \max\left\{0, S^{j\to \tilde{j} }(x,y) \right\}\frac{v^{ \tilde{j} }(y)}{V^{\tilde{j}}}dy \right] / c\right)}}
\end{equation}

Substituting the optimal strategy in the Bellman equation we get:

\begin{equation}\label{eq-bellman-unemployed}
U^{j}(x) = b(x,j) + \beta\left[\left[U^j(x)\right]  + c\log\left(\frac{1}{\mid \mathcal{J} \mid }{\sum_{\tilde{j}\in \mathcal{J}}\exp{\left(\left[p^{j'} \xi \int \max\left\{0, S^{j\to j' }(x,y) \right\}\frac{v^{ j' }(y)}{V^{j'}}dy \right] / c\right)}} \right)\right]  
\end{equation}

\hypertarget{joint-value-of-a-match}{%
\subsection{Joint Value of a Match}\label{joint-value-of-a-match}}

\begin{itemize}
\tightlist
\item
  If a match between a worker and a firm in location \(j\) is destroyed
  the firm will get \(0\) and the worker gets their unemployment value
  in that location \(U^{j}(x)\).
\item
  Matches are destroyed for two reasons:

  \begin{itemize}
  \tightlist
  \item
    \emph{Exogenous destruction} with probability \(\delta\)
  \item
    \emph{Endogenous destruction}, if and only if \(J^j(x,y) < U^j(x)\).
  \item
    Denote
    \(\lambda^j(x,y) = (1-\delta)\mathbb{1}_{\{J^j(x,y)>U^{j\to j}(x,y)\}}\)
    the probability that a match survives accounting for both exogenous
    and endogenous destruction.
  \end{itemize}
\end{itemize}

We can write the Bellman equation of a match value as:

\begin{align*}
J^j(x,y) = \underbrace{f(x,y,j)}_{\text{match value added}} &+ \beta\left[  \overbrace{ (1-\lambda^j(x,y)) }^{\text{match is destroyed}}\underbrace{U^{j}(x)}_{\text{worker gets unemployment value}} \right. + \\
  & \underbrace{(\lambda^j(x,y)}_{\text{match survives}} \max_{\phi_s^j(x)}\left\{-c(\phi_s^j(x)) +  \sum_{j'\in\mathcal{J}}\phi^j_s(x,j')\left[ \overbrace{(1-sp^{j'})}^{\text{no new offers}} \underbrace{J^j(x,y)}_{\text{stays with same firm}} \right. \right. +\\
& sp^{j'} \left. \underbrace{\int\max\{J^{j}(x,y),W^{j\to j'}_{1}(x,y',y)\}\frac{v^{j'}(x)}{V^{j'}}dy'}_{\text{worker only accepts new offers if value is greater than current match}}  \right]
\end{align*}

When a type \(x\) worker employed at a type \(y\) firm in location \(j\)
meet potencial type \(y'\) poaching firm at location \(j'\) (assume that
\(y'>y\) is productive enough to poach the woker, I'll show later what
the poaching condition is), competition between the two employers over
the worker's services occurs as a second price auction. No employer will
offer more that the entire match value \(J^j(x,y)\), thus this becomes
the reservation value for the worker. Nash bargaining solution implies
that the worker will obtain their outside option plus a share \(\xi\) of
the match surplus.

Bargaining implies that a worker employed in location \(j\) by firm
\(y\) when matched with firm \(y'\) in location \(j'\) gets:
\[W^{j \to j'}_{1}(x,y \to y') = J^{j}(x,y) + \xi [J^{j'}(x,y') - J^{j}(x,y) - F^{j' \to j}]\]

Note that this means that to be able to poach from different locations
the firm must be at least \(F^{j\to j'}\) more productive. In terms of
joint surplus we can rewrite
\[W^{j \to j'}_{1}(x,y \to y') = J^{j'}(x,y') + \xi \left[S^{j\to j'}(x,y') - S^{j \to j(x,y)}\right]\]

Focussing on the maximization problem in the Bellman equation we can
write:

\begin{align*}
J^j(x,y) + \max_{\phi_s^j(x)} \left\{  \sum_{j'\in\mathcal{J}}\phi^j_s(x,j') \left[ sp^j\int\max\{0,  \xi \left[S^{j\to j'}(x,y') - S^{j \to j(x,y)}\right] \}\frac{v^{j'}(x)}{V^{j'}}dy' \right] \right\}
\end{align*}

From \eqref{eq:optimal-search-strategy} we know that the optimal
strategy for each employed worker is:

\[\phi_{s}^{j}(x,y,j')=\frac{\exp{\left(\left[p^{j'} \mu \int \max\left\{0, S^{j\to j'}(x,y') - S^{j \to j}(x,y) \right\}\frac{v^{j'}(y')}{V^{j'}}dy' \right] / c\right)}}{\sum_{\tilde{j}\in \mathcal{J}}\exp{\left(\left[p^{\tilde{j}} \mu \int \max\left\{0, S^{j\to \tilde{j} }(x,y')-S^{j \to j}(x,y) \right\}\frac{v^{ \tilde{j} }(y')}{V^{\tilde{j}}}dy' \right] / c\right)}}\]

Plug back into the value function:

\begin{align*} \label{eq-bellman-match}
J^j(x,y) = f(x,y,j) & + \beta\left [ \left[  (1-\lambda^j(x,y))U^{j}(x)   +\lambda^j(x,y)J^j(x,y) \right] \right. \\ & \left. +\log\left(\frac{1}{\mid \mathcal{J} \mid }\sum_{j'\in \mathcal{J}}\exp{\left(\left[p^{j'} \mu \int \max\left\{0, S^{j\to j' }(x,y')-S^{j \to j}(x,y) \right\}\frac{v^{ j' }(y')}{V^{j'}}dy' \right] / c\right)} \right) \right]
\end{align*}

\hypertarget{match-surplus}{%
\subsection{Match Surplus}\label{match-surplus}}

Next I characterize the surplus function. First, define the instant
surplus of a match between a type \(x\) worker in location \(j\) and a
type \(y\) firm in location \(j'\) as:
\[s(x,y,j \to j) = f(x,y,j,z) - b(x,j')\]

We can compute the surpluss of mathces in the same location as:

\begin{align}\label{eq-surplus-same-location}
S^{j \to j}(x,y) &= J^j(x, y) - U^{j}(x) \\
& = s(x,y,j \to j) + \beta \lambda^j(x,y)\underbrace{\left[J^j(x,y) - U^j(x)\right]}_{S^{j\to j}(x,y)} + \beta c \left[ \Lambda^j_1(x, y) - \Lambda^j_0(x)\right]\\
& = s(x,y,j \to j) + \beta \max\{0, S^{j\to j}(x,y)\} + \beta c \left[ \Lambda^j_1(x, y) - \Lambda^j_0(x)\right]
\end{align}

Notice that \(\lambda^{j}(x,y) > 0\) if and only if
\(S^{j\to j}(x,y) > 0\), thus
\[\max\{0, S^{j\to j}(x,y)\} =\lambda^{j}(x,y) S^{j\to j}(x,y) \]

The terms \(\Lambda_0(x)\) and \(\Lambda_1(x,y)\) come from the Bellmans
of the worker and the match respectively and are defined as:

\begin{align*}
\Lambda_1(x, y) &= \log \left(\sum_{j'\in \mathcal{J}}\exp{\left(\left[p^{j'} \mu \int \max\left\{0, S^{j\to j' }(x,y')-S^{j \to j}(x,y) \right\}\frac{v^{ j' }(y')}{V^{j'}}dy' \right] / c\right)} \right)  \\
\Lambda_0(x) &= \log \left(\sum_{j'\in \mathcal{J}}\exp{\left(\left[p^{j'} \mu \int \max\left\{0, S^{j\to j' }(x,y') \right\}\frac{v^{ j' }(y')}{V^{j'}}dy' \right] / c\right)}\right) \\
\end{align*}

Finally we can use the expression in \eqref{eq-surplus-same-location} to
write the surplus of a match between a type \(x\) worker in location
\(j\) and a type \(y\) firm in location \(j'\) as:

\begin{align}\label{eq-surplus}
S^{j \to j'}(x,y) &= J^{j'}(x, y) - \left[U^{j}(x) + F^{j \to j'}\right] \\
& = [J^{j'}(x, y) - U^{j'}(x)] + U^{j'}(x) - \left[U^{j}(x) + F^{j \to j'}\right] \\
& = S^{j'\to j'}(x,y) - [U^{j}(x) - U^{j'}(x) + F^{j \to j'}]
\end{align}

Notice that in computational terms,

From the expressions in \eqref{eq-surplus-same-location} and
\eqref{eq-surplus} the following is evident:

\begin{itemize}
\tightlist
\item
  A worker in location \(j\) can be hired from a firm in location \(j'\)
  by firm \(y\) if and only if the surplus of the match is positive:
  \[S^{j\to j'}(x,y) \geq 0 \qquad \iff \quad = J^{j'}(x,y) - U^{j\to j'}(x) \geq 0\]
\item
  A worker employed at location \(j\) by firm \(y\) can be poached by a
  firm \(y'\) in location \(j'\) if and only if the surplus of the match
  is higher than the surplus of staying at the same firm in the same
  location:
\end{itemize}

\begin{align*}
S^{j\to j'}(x,y') > S^{j\to j}(x,y) &\iff J^{j'}(x,y') - U^{j\to j'}(x) > J^{j}(x,y) - U^{j\to j}(x) \\
&\iff J^{j'}(x,y') - [U^{j}(x) - F^{j\to j'}] > J^{j}(x,y) - U^{j}(x) \\
&\iff J^{j'}(x,y') > J^{j}(x,y) +  F^{j\to j'}
\end{align*}

The surplus function determines how does the stock of unemployed and
employed workers change:

\begin{equation}\label{eq-unemp-interim}
u^{j}_{+}(x) = \underbrace{u^j(x)}_{\text{inherited from }t} + \overbrace{\int \Big(\underbrace{\mathbb{1}_{S^{j \to j}(x,y)<0}}_{\text{endogenous destruction}} + \underbrace{\delta\mathbb{1}_{S^{j \to j}(x,y)\geq0}}_{\text{exogenous destruction}}\Big)h^j(x,y)dy}^{\text{new unemployment created by shock}}
\end{equation}

and

\begin{equation}\label{eq-matches-interim}
h_{+}^{j}(x,y) = (1-\delta)\mathbb{1}_{\left\{S^{j \to j}(x,y)\geq 0\right\}}h^j(x,y)
\end{equation}

\hypertarget{vacancy-creation}{%
\subsection{Vacancy Creation}\label{vacancy-creation}}

\begin{itemize}
\tightlist
\item
  \(B^j(y)\) is the expected value of a type \(y\) vacancy making
  contact with a worker in location \(j\). Vacancies meet unemployed and
  employed type-\(x\) workers at a rates
  \[\frac{u_{+}^j(x)}{L^j} \qquad \text{and} \qquad s\frac{h_{+}^j(x,y)}{L^j}\]
  The expected value of posting a vacancy is therefore, the surplus that
  the posting firm expects to add, potential matches with negative
  surplus are immediately destroyed therefore those add no surplus. In
  terms of the Bellman equation we can write:
\end{itemize}

\begin{align}
B^j(y) &= \underbrace{\sum_{j'\in \mathcal{J}}\left( \int\phi_u^{j'}(x,j)\underbrace{\frac{u_{+}^{j'}(x)}{L^{j'}}}_{\text{likelihhod of match}}\times\overbrace{ \max\{0, S^{j'\to j}(x,y)\} }^{\text{match survives}}dx\right)}_{\text{expected value added from hiring unemployed workers}} + \nonumber \\
& +\underbrace{\sum_{j'\in \mathcal{J}}\left(\int \left(\int\underbrace{s\phi_s^{j'}(x,j)\frac{h_{+}^{j'}(x,y)}{L^{j'}}}_{\text{likelihood of match}}\times \overbrace{ \max\{0, S^{j' \to j}(x,y)-S^{j' \to j'}(x,y')\}}^{\text{poaching is succesfull}}dx\right)dy\right)}_{\text{expected value added from poaching other firms employees}}
\end{align}

Firms will post vacancies such that the marginal cost of the vacancies
and the marginal expected benefit \(B^j\) are equal:
\begin{equation}\protect\hypertarget{eq-vacancy-posting-clearing}{}{c_{j}'(v^{j}(y))=q^{j}B^{j}(y)}\label{eq-vacancy-posting-clearing}\end{equation}

\hypertarget{labor-market-flows}{%
\section{Labor Market Flows}\label{labor-market-flows}}

Now we characterize the flows of workers in-to and out-of unemployment
at each location :

\begin{itemize}
\tightlist
\item
  Let
  \[\eta^{j' \to j}(x,y) = \mathbb{1}_{\{S^{j' \to j}(x,y)>0\}} \qquad \eta^{j' \to j}(x,y'\to y) = \mathbb{1}_{\{S^{j' \to j}(x,y) > S^{j' \to j'}(x,y')\}}\]
\end{itemize}

Then the law of motion of the unemployment and emplyment are:

\begin{equation}
\label{eq-law-of-motion-unemp}
u^{j}(x) = \sum_{j'\in \mathcal{J}}\underbrace{\phi_u^{j'}(x,j) u_{+}^{j'}(x)\left( 1 - \int \eta^{j'\to j}(x,y) p^j\frac{v^j(y)}{V^j}dy \right)}_{\text{mass of incoming unemployed workers that are not hired by any firm}}
\end{equation}

To compute the mass of employed workers in the next period define:

\begin{itemize}
\tightlist
\item
  The mass of workers hired from unemployment:
\end{itemize}

\begin{equation}
h^j_{u}(x,y) = \sum_{j'\in \mathcal{J}}\phi_u^{j'}(x,j) u_{+}^{j'}(x)\eta^{j'\to j}(x,y) p^j\frac{v^j(y)}{V^j}
\end{equation}

\begin{itemize}
\tightlist
\item
  The mass of workers that are succesfully poached from other firms:
\end{itemize}

\begin{equation}
h^j_{p} = \sum_{j'\in \mathcal{J}}\left(\overbrace{\int\underbrace{ h_{+}^{j'}(x,y')sp^j\frac{v^{j}(y)}{V^{j}}\eta^{j'\to j}(x,y'\to y)}_{\text{mass of workers poached from } y' \text{ firms in location } j'}dy'}^{\text{mass of workers that } y \text{ succesfully poach from location} j'} \right)
\end{equation}

\begin{itemize}
\tightlist
\item
  The mass of workers that the firm is able to retain:
\end{itemize}

\begin{equation}
h^j_{r} = \underbrace{h_{+}(x,y)  \times }_{\text{employed at interim }} \overbrace{\prod_{j'\in\mathcal{J}}\left[ \underbrace{1 - \frac{s}{\mid \mathcal{J} \mid}\int\left( p^{j'}\frac{v^{j'}(y')}{V^{j'}} \eta^{j\to j'}(x,y\to y')\right)dy'}_{\text{no poached by any firm in location }j'} \right]}^{\text{probability of not being poached}}
\end{equation}

Finally the mass of employed workers in the next period is:

\begin{equation}
\label{eq-law-of-motion-emp}
h^j(x,y) =  h^j_{u}(x,y) + h^j_{p}(x,y) + h^j_{r}(x,y) 
\end{equation}

Then I can compute the distribution of skill in each location as:
\[\ell^j(x) = u^j(x) + \int h^j(x,y)dy\] and the total population in
each location as: \[\mu^j = \int \ell^j(x)dx\]

\bookmarksetup{startatroot}

\hypertarget{endogenizing-location-productivity-and-cost-of-living}{%
\chapter{Endogenizing Location Productivity and Cost of
Living}\label{endogenizing-location-productivity-and-cost-of-living}}

This section focus on how the distribution of workers (skils) affect
both the productivity of matches \(f(x,y,j)\) and the instant utility of
unemployed workers \(b(x,j)\).

\hypertarget{sec-agglomeration_effect}{%
\section{Location Productivity}\label{sec-agglomeration_effect}}

I borrow from
(\protect\hyperlink{ref-davisSpatialKnowledgeEconomy2019}{Davis and
Dingel 2019}) in assuming that the productivity of workers in a location
\(j\) is a result of idea exchange process within each location.

\begin{itemize}
\item
  Assume that a type \(x\) worker in location \(j\) has a
  \(\Omega(x, \overline{X}^j)\) where \(\overline{X}^j\) is the value of
  idea exchange in location \(j\). Thus:
  \[f(x,y,j,z_t) = f\left(\Omega(x, \overline{X}^j), y, z_t\right)\]
\item
  Assume that the value of idea exchange in location \(j\) is a function
  of the distribution of skills in location \(j\):

  \[ \overline{X}^j = \overline{X}\left(\left\{\ell^j(x)\right\}\right) \]
\end{itemize}

It's natural to make the following assumptions on
\(\Omega(x, \overline{X}^j)\) and \(\overline{X}^j\):

\begin{itemize}
\tightlist
\item
  \textbf{Assumption 1}: \(\Omega(x, \overline{X}^j)\) should be
  increasing in \(x\) and \(\overline{X}^j\) and in the absence of idea
  exchange, worker productivity is just their type:
  \(\Omega(x, 0) = x\).
\item
  \textbf{Assumption 2}: Worker type \(x\) and idea exchange environment
  are complements i.e.~\(\Omega(x, \overline{X}^j)\) supermodular in
  (\(x\) , \(\overline{X}^j\)).
\item
  \textbf{Assumption 3}: The value of idea exchange in location \(j\) is
  increasing in the number of potential exchange partners \(\mu^j\) and
  on the distribution of skills in location \(j\) \(\ell^j(x)\).

  \begin{itemize}
  \tightlist
  \item
    With the \emph{FOSD} order of distributions.
  \end{itemize}
\end{itemize}

I will focus on the following functional forms for
\(\Omega(x, \overline{X}^j)\) and \(\overline{X}^j\):

\[\Omega(x, \overline{X}^j) = x(1 + A \overline{X}^j x)\] where \(A\) is
a parameter that captures the scope of gains from idea exchange.

\[
    \overline{X}\left(\left\{\ell^j(x)\right\}\right) = \left(1 - e^{-\nu \int \ell^j(x) dx}\right)\hat{x}^j =\left(1 - e^{-\nu \mu^j} \right)\hat{x}^j
\]

The probability of encountering someone during each moment of time
seeking is given by \(1 - \exp(-ν \mu^j)\), note that as the number of
potential exchange partners (\(\mu^j\)) increases, the probability of
encountering someone also increases, which makes intuitive sense.

The average ability of the individuals you encounter in these exchanges
is denoted as \(\hat{x}^j\). This is a weighted average of the abilities
of the people you meet
\[\hat{x}^j = \frac{1}{\mu^j}\int{x\ell^j(x)dx}=\frac{\mathbb{E}^j[x]}{\mu^j}\]
where \(\mathbb{E}^j[x]\) is the average ability of workers in location
\(j\).

\textbf{Cost of living}

\begin{itemize}
\tightlist
\item
  As in (\protect\hyperlink{ref-davisSpatialKnowledgeEconomy2019}{Davis
  and Dingel 2019}) and
  (\protect\hyperlink{ref-behrensProductiveCitiesSorting2014a}{Behrens,
  Duranton, and Robert-Nicoud 2014}) every individual in location \(j\)
  pays the congestion cost of \(\theta\mu_j^{\gamma}\). Denote
  \(b^j(x)\) the home production of type \(x\) workers in location \(j\)
  then the instant utility of unemployed workers in location \(j\) is
  given by: \[b(x,y) = b^j(x) - \theta\mu_j^{\gamma}\]
\end{itemize}

\bookmarksetup{startatroot}

\hypertarget{computation-of-the-equilibrium}{%
\chapter{Computation of the
Equilibrium}\label{computation-of-the-equilibrium}}

\hypertarget{functional-forms}{%
\section{Functional Forms}\label{functional-forms}}

The matching function is
\[M(L, V) = \omega_1 L^{\omega_2}V^{1-\omega_2}\]

The cost of creating a \(v\) vacancies are
\[c(v) = \frac{c_0 v^{1-c_1}}{1 - c_1}\]

Using the value of \(B^j\) any particular cost and matching function can
be used to pin down the number of vacancies posted by each firm in each
location. Note that this particular matching function implies that
\[q^j = \frac{M(L^j, V^j)}{V^j}=\frac{\omega_1 L^{\omega_2} V^{1 - \omega_2}}{V^j}= \omega_1(\theta^j)^{-\omega_2}\]

Since the number of vancies is pindown by profit maximization we can
write:
\[c_0 v^{j}(y)^{b} = q^j B^j(y) \qquad \implies \qquad  v^{j}(y) = \left(\frac{q^j B^j(y)}{c_0}\right)^{\frac{1}{c_1}} = \left(\frac{\omega_1(\theta^j)^{-\omega_2} B^j(y)}{c_0}\right)^{\frac{1}{c_1}} \]

Then integrating over all firms in each location we get the total number
of vacancies posted in each location as:
\[V^j = \int v^j(y)d\Gamma(y) = \left((\theta^j)^{-\omega_2}\right)^{\frac{1}{c_1}}\int\left(\frac{\omega_1 B^j(y)}{c_0}\right)^{\frac{1}{c_1}}d\Gamma(y)\]
Multiply by \(1/L^j\) on both sides to obtain:
\[\theta^j = \frac{1}{L^j}\left((\theta^j)^{-\omega_2}\right)^{\frac{1}{c_1}}\int\left(\frac{\omega_1 B^j(y)}{c_0}\right)^{\frac{1}{c_1}}d\Gamma(y)\]
solving for \(\theta^j\) we get:
\[\theta^j = \left(\frac{1}{L^j}\int\left(\frac{\omega_1 B^j(y)}{c_0}\right)^{\frac{1}{c_1}}d\Gamma(y)\right)^{\frac{c_1}{c_1+\omega_2}}\]

I assume that the value added at the match level is a Cobb-Douglas
function of the worker and firm productivity on each location:
\[f(x,y,z) = \Omega\left(x, \overline{X}^J\right)^\alpha y^{1-\alpha}\]

I follow
(\protect\hyperlink{ref-liseMacrodynamicsSortingWorkers2017}{Lise and
Robin 2017}) and characterize home production as
\[b_{prod}(x) = b_{share} f(x,y^*(x,1),1)\] where \(y^*(x,j,z)\) the
firm type that maximizes the output of worker \(x\) in location \(j\).
This means that the instant utility of unemployed worker of type \(x\)
in location \(j\) is given by:
\[b(x,j) = b_{share} f(x,y^*(x,1),1) - \theta \mu_j^\gamma\]

\hypertarget{parametrization}{%
\subsection{Parametrization}\label{parametrization}}

I choose the simplest cost of moving funciton:

\begin{equation}
    \label{eq-cost-of-moving}
    F^{j\to  j'} = \begin{cases} 0 & \text{if } j = j' \\ \overline{F} & \text{if } j \neq j' \end{cases}
\end{equation}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.3333}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.3333}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.3333}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Value
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Source
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\(\alpha\) & 0.5 & \\
\(\xi\) & 0.5 & \\
\(\overline{F}\) & 3.1 & \\
\(b_{share}\) & 0.1 &
(\protect\hyperlink{ref-hallEmploymentFluctuationsEquilibrium2005}{Hall
2005}) \\
\(\beta\) & 0.952381 & Consistent with \(5\%\) discount rate \\
\(s\) & 2.7e-2 &
(\protect\hyperlink{ref-davisSpatialKnowledgeEconomy2019}{Davis and
Dingel 2019}) \\
\(c_0\) & 2.8e-2 &
(\protect\hyperlink{ref-liseMacrodynamicsSortingWorkers2017}{Lise and
Robin 2017}) \\
\(c_1\) & 0.584 &
(\protect\hyperlink{ref-liseMacrodynamicsSortingWorkers2017}{Lise and
Robin 2017}) \\
\(\omega_1\) & 4.97e-2 &
(\protect\hyperlink{ref-liseMacrodynamicsSortingWorkers2017}{Lise and
Robin 2017}) \\
\(\omega_2\) & 0.5 &
(\protect\hyperlink{ref-liseMacrodynamicsSortingWorkers2017}{Lise and
Robin 2017}) \\
\(\gamma_1\) & 0.1 &
(\protect\hyperlink{ref-davisSpatialKnowledgeEconomy2019}{Davis and
Dingel 2019}) \\
\(\gamma_2\) & 1 &
(\protect\hyperlink{ref-davisSpatialKnowledgeEconomy2019}{Davis and
Dingel 2019}) \\
\(A\) & 3 &
(\protect\hyperlink{ref-davisSpatialKnowledgeEconomy2019}{Davis and
Dingel 2019}) \\
\(\nu\) & 50 &
(\protect\hyperlink{ref-davisSpatialKnowledgeEconomy2019}{Davis and
Dingel 2019}) \\
\end{longtable}

Type grids are defined as:

\begin{itemize}
\item
  \(\{x_1,\ldots,x_{N_x}\}\subset[\) 1.0e-2, 0.99 \(]\) is a
  discretization of the continuum of worker types.

  \begin{itemize}
  \item
    \(N_x\)=21 as in
    (\protect\hyperlink{ref-liseMacrodynamicsSortingWorkers2017}{Lise
    and Robin 2017}).
  \item
    Parameters for the distribution are estimated by the authors.
  \end{itemize}
\item
  \(\{y_1,\ldots,y_{N_y}\}\subset[\) 1.0e-2, 0.99 \(]\) is a
  discretization of the continuum of firm types.

  \begin{itemize}
  \tightlist
  \item
    \(N_y\)=20 as in
    (\protect\hyperlink{ref-liseMacrodynamicsSortingWorkers2017}{Lise
    and Robin 2017}).
  \end{itemize}
\end{itemize}

\hypertarget{type-distributions}{%
\subsection{Type Distributions}\label{type-distributions}}

\hypertarget{algorithm}{%
\section{Algorithm}\label{algorithm}}

\begin{algorithm}

\SetKwData{Left}{left}\SetKwData{This}{this}\SetKwData{Up}{up}
\SetKwFunction{Union}{Union}\SetKwFunction{FindCompress}{FindCompress}
\SetKwInOut{Input}{input}\SetKwInOut{Output}{output}

\caption{Algorithm to compute stationary distributions.}\label{alg:solution_algorithm}

\Input{Parameters, Initial guesses for $\{u^j(x)\}_{j\in \mathcal{J}}$ and $\{h^j(x, y)\}_{j\in \mathcal{J}}$, $tol$, $n_{iter max}$}

$S^{j\to j'}(x,y) \gets 0$ for all $j, j', x, y$  \;
$U^{j}(x) \gets 0$ for all $j,x$  \;
This implies:

$\phi^j_u(x, j') \gets 1/\mid \mathbfcal{J} \mid$ for all $j,j',x$ (random search) \;
$\phi^j_s(x, y, j') \gets 1/\mid \mathbfcal{J} \mid$ for all $j,j',x,y$ (random search) \;

$error$ \gets $\infty$ \;
\While{$error$ $ > tol$ and $n_{iter}  < n_{iter max} $}{
    Using $S^{j \to j'}(x,y)$, update the distribution of employed and unemployed workers in each location $j$ using \eqref{eq-unemp-interim} and \eqref{eq-matches-interim} \ and obtain:
    \begin{itemize}
        \item $L^j$: the total search intensity in location $j$\;
    \end{itemize}
    Compute the value $B^j(y)$ of vacancy creation, use it to compute:
    \begin{itemize}
        \item $v^j(y)$: the number of vacancies posted by a firm $y$ in location $j$\;
        \item $V^j = \int v^j(y) dy$: the total number of job opportunities posted in location $j$\;
        \item $\theta^j = V^j / L^j$: the market tightness in location $j$\;
    \end{itemize}
    
    Update $S^{j \to j'}(x,y)$ and $U^{j}(x)$ use it to compute:
    
    \begin{itemize}
        \item Optimal search strategies $\phi^j_u(x)$ and $\phi^j_s(x)$\;
    \end{itemize}
    Update the distribution of unemplyed workers and matches in each location $j$ using \eqref{eq-law-of-motion-unemp} and \eqref{eq-law-of-motion-emp} \
    Update error and iteration counter\;
}
\end{algorithm}

\hypertarget{bibliography}{%
\chapter*{References}\label{bibliography}}
\addcontentsline{toc}{chapter}{References}

\hypertarget{refs}{}
\begin{CSLReferences}{1}{0}
\leavevmode\vadjust pre{\hypertarget{ref-baggerEmpiricalModelWage2019a}{}}%
Bagger, Jesper, and Rasmus Lentz. 2019. {``An {Empirical Model} of {Wage
Dispersion} with {Sorting}.''} \emph{The Review of Economic Studies} 86
(1): 153--90. \url{https://doi.org/10.1093/restud/rdy022}.

\leavevmode\vadjust pre{\hypertarget{ref-behrensProductiveCitiesSorting2014a}{}}%
Behrens, Kristian, Gilles Duranton, and Frédéric Robert-Nicoud. 2014.
{``Productive {Cities}: {Sorting}, {Selection}, and {Agglomeration}.''}
\emph{Journal of Political Economy} 122 (3): 507--53.
\url{https://doi.org/10.1086/675534}.

\leavevmode\vadjust pre{\hypertarget{ref-cahucWageBargainingOntheJob2006}{}}%
Cahuc, Pierre, Fabien Postel-Vinay, and Jean-Marc Robin. 2006. {``Wage
{Bargaining} with {On-the-Job Search}: {Theory} and {Evidence}.''}
\emph{Econometrica} 74 (2): 323--64.
\url{https://doi.org/10.1111/j.1468-0262.2006.00665.x}.

\leavevmode\vadjust pre{\hypertarget{ref-cheremukhinTargetedSearchMatching2020}{}}%
Cheremukhin, Anton, Paulina Restrepo-Echavarria, and Antonella Tutino.
2020. {``Targeted Search in Matching Markets.''} \emph{Journal of
Economic Theory} 185 (January): 104956.
\url{https://doi.org/10.1016/j.jet.2019.104956}.

\leavevmode\vadjust pre{\hypertarget{ref-davisSpatialKnowledgeEconomy2019}{}}%
Davis, Donald R., and Jonathan I. Dingel. 2019. {``A {Spatial Knowledge
Economy}.''} \emph{American Economic Review} 109 (1): 153--70.
\url{https://doi.org/10.1257/aer.20130249}.

\leavevmode\vadjust pre{\hypertarget{ref-hallEmploymentFluctuationsEquilibrium2005}{}}%
Hall, Robert E. 2005. {``Employment {Fluctuations} with {Equilibrium
Wage Stickiness}.''} \emph{American Economic Review} 95 (1): 50--65.
\url{https://doi.org/10.1257/0002828053828482}.

\leavevmode\vadjust pre{\hypertarget{ref-lentzCompetitiveRandomSearch}{}}%
Lentz, Rasmus, and Espen Rasmus Moen. n.d. {``Competitive or {Random
Search}?''}

\leavevmode\vadjust pre{\hypertarget{ref-liseMacrodynamicsSortingWorkers2017}{}}%
Lise, Jeremy, and Jean-Marc Robin. 2017. {``The {Macrodynamics} of
{Sorting} Between {Workers} and {Firms}.''} \emph{American Economic
Review} 107 (4): 1104--35. \url{https://doi.org/10.1257/aer.20131118}.

\leavevmode\vadjust pre{\hypertarget{ref-matejkaRationalInattentionDiscrete2015}{}}%
Matějka, Filip, and Alisdair McKay. 2015. {``Rational {Inattention} to
{Discrete Choices}: {A New Foundation} for the {Multinomial Logit
Model}.''} \emph{American Economic Review} 105 (1): 272--98.
\url{https://doi.org/10.1257/aer.20130047}.

\leavevmode\vadjust pre{\hypertarget{ref-simsRationalInattentionLinearQuadratic2006}{}}%
Sims, Christopher A. 2006. {``Rational {Inattention}: {Beyond} the
{Linear-Quadratic Case}.''} \emph{American Economic Review} 96 (2):
158--63. \url{https://doi.org/10.1257/000282806777212431}.

\leavevmode\vadjust pre{\hypertarget{ref-simsImplicationsRationalInattention2003}{}}%
Sims, Christopher A. 2003. {``Implications of Rational Inattention.''}
\emph{Journal of Monetary Economics} 50 (3): 665--90.
\url{https://doi.org/10.1016/S0304-3932(03)00029-1}.

\leavevmode\vadjust pre{\hypertarget{ref-wuPartiallyDirectedSearch2020}{}}%
Wu, Liangjie. 2020. {``Partially {Directed Search} in the {Labor
Market}.''} PhD thesis, University of Chicago.

\end{CSLReferences}



\end{document}
